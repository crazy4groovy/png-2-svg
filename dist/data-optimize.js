"use strict";const e=require("simplify-js"),t=require("./bezier-smooth");module.exports=function({data:r},{tolerance:c=0,decimalPlaces:n=!0,smooth:a=0}){const o=r.match(/d="([^"]+)"/g),s=o.map(e=>e.substring(3,e.length-1)).map(e=>e.match(/[a-z][^a-z]*/gi));let m="",u=s.map(r=>r.reduce((r,n)=>{const o=n[0];if("l"!==o&&m.length>0){r+=c||a?function(r,{tolerance:c,smooth:n}){const a=r.match(/-?\d+ */g),o=a.reduce((e,t,r)=>(r%2==1&&e.push([Number(a[r-1]),Number(a[r])]),e),[]).map(([e,t])=>({x:e,y:t})),s=e(o,Math.min(c,3),!0);if(n){const e=s.map(({x:e,y:t})=>[e,t]);return t(e,{smooth:n})}return s.reduce((e,{x:t,y:r})=>e+" "+t+" "+r,"l")}(m,{tolerance:c,smooth:a}):"l"+m,m=""}return"l"===o?m+=" "+n.substr(1):r+=n,r},""));n||(u=u.map(e=>{const t=e.match(/-?\d*\.\d/g)||[],r=t.map(e=>.5!==Math.abs(e%1)?Math.round(e):e);let c=0;return t.forEach((t,n)=>{const a=e.slice(c);e=e.slice(0,c)+a.replace(String(t),r[n]),c=a.indexOf(t)+String(r[n]).length}),e}));return u.reduce((e,t,r)=>e.replace(o[r],`d="${t}"`),r)};
